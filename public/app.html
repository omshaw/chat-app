<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat APP</title>
    <link rel="stylesheet" href="https://bootswatch.com/4/journal/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="app-body">
    <div class="user">
        <h2></h2>
        <div class="users">
        </div>
    </div>
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <!-- <div id="caption"></div> -->
    </div>      
    <div class="main">
        <!-- <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-menu-app" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M0 1.5A1.5 1.5 0 0 1 1.5 0h2A1.5 1.5 0 0 1 5 1.5v2A1.5 1.5 0 0 1 3.5 5h-2A1.5 1.5 0 0 1 0 3.5v-2zM1.5 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5h-2zM14 7H2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM2 6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H2z"/>
            <path fill-rule="evenodd" d="M15 11H1v-1h14v1zM2 12.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
          </svg> -->
        <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-arrow-left-short" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
        </svg>
        <div id="gr-name">
        </div>
        <div class="message">
            <!-- <div class="me ">

            </div>
            <div class="left">

            </div>
            <div class="right">
                
            </div> -->
        </div>
        <!-- OLD -->
        <!-- <footer>
            <input type="text" placeholder="Type a message" id="msg" autofocus>
            <button id="s" type="submit">send</button>
        </footer> -->

        <!-- NEW -->
        <div class="row">
			<div class="col-12">
			  <div class="chat-box-tray">
				<i id="emo" class="material-icons">sentiment_very_satisfied</i>
				<div id="Msg" class="Input" type="text" contenteditable="true" data-text="Type your message here..."></div>
                <i id="mic" class="material-icons">mic</i>
				<i id="sb" class="material-icons">send</i>
			  </div>
              <div class="emoji-dashboard">
				<ul class="emojis">
					<li class="emoji" data-clipboard-text="--1"><i class="em em---1"></i></li>
					<li class="emoji" data-clipboard-text="-1"><i class="em em--1"></i></li>
					<li class="emoji" data-clipboard-text="100"><i class="em em-100"></i></li>
					<li class="emoji" data-clipboard-text="1234"><i class="em em-1234"></i></li>
					<li class="emoji" data-clipboard-text="8ball"><i class="em em-8ball"></i></li>
					<li class="emoji" data-clipboard-text="a"><i class="em em-a"></i></li>
					<li class="emoji" data-clipboard-text="ab"><i class="em em-ab"></i></li>
					<li class="emoji" data-clipboard-text="abc"><i class="em em-abc"></i></li>
					<li class="emoji" data-clipboard-text="abcd"><i class="em em-abcd"></i></li>
					<li class="emoji" data-clipboard-text="accept"><i class="em em-accept"></i></li>
					<li class="emoji" data-clipboard-text="aerial_tramway"><i class="em em-aerial_tramway"></i></li>
					<li class="emoji" data-clipboard-text="airplane"><i class="em em-airplane"></i></li>
					<li class="emoji" data-clipboard-text="alarm_clock"><i class="em em-alarm_clock"></i></li>
					<li class="emoji" data-clipboard-text="alien"><i class="em em-alien"></i></li>
					<li class="emoji" data-clipboard-text="ambulance"><i class="em em-ambulance"></i></li>
					<li class="emoji" data-clipboard-text="anchor"><i class="em em-anchor"></i></li>
					<li class="emoji" data-clipboard-text="angel"><i class="em em-angel"></i></li>
					<li class="emoji" data-clipboard-text="anger"><i class="em em-anger"></i></li>
					<li class="emoji" data-clipboard-text="angry"><i class="em em-angry"></i></li>
					<li class="emoji" data-clipboard-text="anguished"><i class="em em-anguished"></i></li>
					<li class="emoji" data-clipboard-text="ant"><i class="em em-ant"></i></li>
					<li class="emoji" data-clipboard-text="apple"><i class="em em-apple"></i></li>
					<li class="emoji" data-clipboard-text="aquarius"><i class="em em-aquarius"></i></li>
					<li class="emoji" data-clipboard-text="aries"><i class="em em-aries"></i></li>
					<li class="emoji" data-clipboard-text="arrow_backward"><i class="em em-arrow_backward"></i></li>
					<li class="emoji" data-clipboard-text="arrow_double_down"><i class="em em-arrow_double_down"></i></li>
					<li class="emoji" data-clipboard-text="arrow_double_up"><i class="em em-arrow_double_up"></i></li>
					<li class="emoji" data-clipboard-text="arrow_down"><i class="em em-arrow_down"></i></li>
					<li class="emoji" data-clipboard-text="arrow_down_small"><i class="em em-arrow_down_small"></i></li>
					<li class="emoji" data-clipboard-text="arrow_forward"><i class="em em-arrow_forward"></i></li>
					<li class="emoji" data-clipboard-text="arrow_heading_down"><i class="em em-arrow_heading_down"></i></li>
					<li class="emoji" data-clipboard-text="arrow_heading_up"><i class="em em-arrow_heading_up"></i></li>
					<li class="emoji" data-clipboard-text="arrow_left"><i class="em em-arrow_left"></i></li>
					<li class="emoji" data-clipboard-text="arrow_lower_left"><i class="em em-arrow_lower_left"></i></li>
					<li class="emoji" data-clipboard-text="arrow_lower_right"><i class="em em-arrow_lower_right"></i></li>
					<li class="emoji" data-clipboard-text="arrow_right"><i class="em em-arrow_right"></i></li>
					<li class="emoji" data-clipboard-text="arrow_right_hook"><i class="em em-arrow_right_hook"></i></li>
					<li class="emoji" data-clipboard-text="arrow_up"><i class="em em-arrow_up"></i></li>
					<li class="emoji" data-clipboard-text="arrow_up_down"><i class="em em-arrow_up_down"></i></li>
					<li class="emoji" data-clipboard-text="arrow_up_small"><i class="em em-arrow_up_small"></i></li>
					<li class="emoji" data-clipboard-text="arrow_upper_left"><i class="em em-arrow_upper_left"></i></li>
					<li class="emoji" data-clipboard-text="arrow_upper_right"><i class="em em-arrow_upper_right"></i></li>
					<li class="emoji" data-clipboard-text="arrows_clockwise"><i class="em em-arrows_clockwise"></i></li>
					<li class="emoji" data-clipboard-text="arrows_counterclockwise"><i class="em em-arrows_counterclockwise"></i></li>
					<li class="emoji" data-clipboard-text="art"><i class="em em-art"></i></li>
					<li class="emoji" data-clipboard-text="articulated_lorry"><i class="em em-articulated_lorry"></i></li>
					<li class="emoji" data-clipboard-text="astonished"><i class="em em-astonished"></i></li>
					<li class="emoji" data-clipboard-text="atm"><i class="em em-atm"></i></li>
					<li class="emoji" data-clipboard-text="b"><i class="em em-b"></i></li>
				</ul>
			</div>
			</div>
		</div>


    </div>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
    <script type="text/javascript" src="libs/moment.js"></script>
    
    <script  src="https://code.jquery.com/jquery-3.1.1.min.js"  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="  crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" ></script>
    <script>
        $('.bi').css({'cursor':'pointer'});
        $('.bi-arrow-left-short').click(function(){
            window.location.href='/dashboard';
        });
        // $('.bi-menu-app').click(function(){
            
        // });
        var modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        $('body').on('click','#dp', function(){
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        });

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks on <span> (x), close the modal
        span.addEventListener('click',()=>{ 
          modal.style.display = "none";
        });
        

        $('#emo').click(function(){
			$('.emoji-dashboard').slideToggle('fast');
		});
		$(document).click(function(){
			$(".emoji-dashboard").slideUp('fast');
		});
		$(".material-icons").click(function(e){
			e.stopPropagation();
		});
		$('.emoji-dashboard li .em').click(function(){
			var emo = $(this).css('background-image').split('"')[1];
            
			$('.Input').find('div').remove();
			$('.Input').append('<img src="'+emo+'">');
			$(".emoji-dashboard").slideUp('fast');

		});

        // VOICE TO TEXT
        var speechRecognition = window.webkitSpeechRecognition;
        var recognition = new speechRecognition();

        var textbox = $("#Msg");

        recognition.continuous = true

        // recognition is started

        recognition.onstart = function() {

            console.log("Voice Recognition is On");
            $('#mic').css('color','blue');
        }

        recognition.onspeechend = function() {

            console.log("No Activity");
            $('#mic').css('color','grey');
        }

        recognition.onerror = function() {

            console.log("Try Again");
            $('#mic').css('color','grey');
        }

        recognition.onresult = function(event) {

            var current = event.resultIndex;

            var transcript = event.results[current][0].transcript

            textbox.append(transcript);

        }

        $("#mic").click(function(event) {

            recognition.start();

        });

    </script>
</body>
</html>